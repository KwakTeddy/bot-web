var path = require('path');
var type = require(path.resolve('modules/bot/action/common/type'));
var address = require(path.resolve('./modules/bot/action/common/address'));
var publictask = require('./publictask');

var pre = /(?:~이전페이지|~앞|^<$)/;
var next = /(?:~다음페이지|~뒤|^>$)/;
var up = /(?:^0$)/
var first = /(?:~시작|~처음|^!$|취소)/

예보:
<{types: [{name: 'address', typeCheck: address.addressTypeCheck2, raw: true},{name: 'date', typeCheck: 'dateTypeCheck', raw: true, context: true}], regexp: /날씨/}
{action: publictask.forecastweather}
> if((context.dialog.address.시군구명||context.dialog.address.시도명) && context.dialog.address.법정읍면동명 == undefined && context.dialog.address.도로명 == undefined && context.dialog.address.건물본번 == undefined) 고객님, 정확한 안내를 드리기 위하여 +address.시도명+ +address.시군구명+의 하위 상세주소를 입력 부탁드립니다.
    < {types: [{name: 'address', typeCheck: address.addressTypeCheck2, raw: true}]}
    {action: publictask.forecastweather}
    > if((context.dialog.address.시군구명||context.dialog.address.시도명) && context.dialog.address.법정읍면동명 == undefined && context.dialog.address.도로명 == undefined && context.dialog.address.건물본번 == undefined) {repeat: 1, options: {output: '고객님, 정확한 안내를 드리기 위하여 +address.시도명+ +address.시군구명+의 하위 상세주소를 입력 부탁드립니다.'}}
    > if(Array.isArray(context.dialog.address)) 다음 중 어떤 지역이신가요?\n#address#+index+. +지번주소+ +시군구용건물명+\n#|다음 중 어떤 지역이신가요?
        <{types: [{name: 'address', listName: 'address', typeCheck: 'listTypeCheck'}]}
        >{call: '예보셋'}
        <{if: 'true'}> {up: 1}
    >if(context.dialog.forecastdatecheck == 'over') 죄송합니다. 현재 최대 10일간의 날씨정보를 제공하고 있습니다.
    >if(context.dialog.forecastdatecheck == 'below') 죄송합니다. 이전 기간의 날씨정보는 제공하지 않습니다.
    >if(context.dialog.range == '이번주' || context.dialog.range == '다음주' || context.dialog.range == '이번달') +range+의 날씨는 다음과 같습니다.\n#item#+month+/+day+\n날씨: +conditions+\n최저온도: +low+도\n최고온도: +high+도\n#
    >if(context.dialog.item) +item.date.month+/+item.date.day+의 날씨입니다.\n날씨: +item.conditions+\n최저온도: +item.low+도\n최고온도: +item.high+도
    <{if: 'true'}> {repeat: 1, options : {output: '죄송합니다. 지금 입력하신 주소는 찾을수 없는 주소입니다.\n 아래 예시와 같이 다시 말씀해주세요.\n[예시]\n구로동\n구로구 구로동\n구로구 구로동 423-12'}}
> if(Array.isArray(context.dialog.address)) 다음 중 어떤 지역이신가요?\n#address#+index+. +지번주소+ +시군구용건물명+\n#|다음 중 어떤 지역이신가요?
    <{types: [{name: 'address', listName: 'address', typeCheck: 'listTypeCheck'}]}
    >{call: '예보셋'}
    <{if: 'true'}> {up: 1}
>if(context.dialog.forecastdatecheck == 'over') 죄송합니다. 현재 최대 10일간의 날씨정보를 제공하고 있습니다.
>if(context.dialog.forecastdatecheck == 'below') 죄송합니다. 이전 기간의 날씨정보는 제공하지 않습니다.
>if(context.dialog.range == '이번주' || context.dialog.range == '다음주' || context.dialog.range == '이번달') +range+의 날씨는 다음과 같습니다.\n#item#+month+/+day+\n날씨: +conditions+\n최저온도: +low+도\n최고온도: +high+도\n#
>if(context.dialog.item) +item.date.month+/+item.date.day+의 날씨입니다.\n날씨: +item.conditions+\n최저온도: +item.low+도\n최고온도: +item.high+도

예보둘:
<{types: [{name: 'date', typeCheck: 'dateTypeCheck', raw: true, context: true}], regexp: /날씨/}
>어느 지역의 날씨를 알려드릴까요?\n[예시]\n구로동\n구로구 구로동\n구로구 구로동 423-12
    <{types: [{name: 'address', typeCheck: address.addressTypeCheck2, raw: true}]}
    {action: publictask.forecastweather}
    > if((context.dialog.address.시군구명||context.dialog.address.시도명) && context.dialog.address.법정읍면동명 == undefined && context.dialog.address.도로명 == undefined && context.dialog.address.건물본번 == undefined) 고객님, 정확한 안내를 드리기 위하여 +address.시도명+ +address.시군구명+의 하위 상세주소를 입력 부탁드립니다.
        < {types: [{name: 'address', typeCheck: address.addressTypeCheck2, raw: true}]}
        {action: publictask.forecastweather}
        > if((context.dialog.address.시군구명||context.dialog.address.시도명) && context.dialog.address.법정읍면동명 == undefined && context.dialog.address.도로명 == undefined && context.dialog.address.건물본번 == undefined) {repeat: 1, options: {output: '고객님, 정확한 안내를 드리기 위하여 +address.시도명+ +address.시군구명+의 하위 상세주소를 입력 부탁드립니다.'}}
        > if(Array.isArray(context.dialog.address)) 다음 중 어떤 지역이신가요?\n#address#+index+. +지번주소+ +시군구용건물명+\n#|다음 중 어떤 지역이신가요?
            <{types: [{name: 'address', listName: 'address', typeCheck: 'listTypeCheck'}]}
            >{call: '예보'}
            <{if: 'true'}> {up: 1}
        >if(context.dialog.forecastdatecheck == 'over') 죄송합니다. 현재 최대 10일간의 날씨정보를 제공하고 있습니다.
        >if(context.dialog.forecastdatecheck == 'below') 죄송합니다. 이전 기간의 날씨정보는 제공하지 않습니다.
        >if(context.dialog.range == '이번주' || context.dialog.range == '다음주' || context.dialog.range == '이번달') +range+의 날씨는 다음과 같습니다.\n#item#+month+/+day+\n날씨: +conditions+\n최저온도: +low+도\n최고온도: +high+도\n#
        >if(context.dialog.item) +item.date.month+/+item.date.day+의 날씨입니다.\n날씨: +item.conditions+\n최저온도: +item.low+도\n최고온도: +item.high+도
        <{if: 'true'}> {repeat: 1, options : {output: '죄송합니다. 지금 입력하신 주소는 찾을수 없는 주소입니다.\n 아래 예시와 같이 다시 말씀해주세요.\n[예시]\n구로동\n구로구 구로동\n구로구 구로동 423-12'}}
    > if(Array.isArray(context.dialog.address)) 다음 중 어떤 지역이신가요?\n#address#+index+. +지번주소+ +시군구용건물명+\n#|다음 중 어떤 지역이신가요?
        <{types: [{name: 'address', listName: 'address', typeCheck: 'listTypeCheck'}]}
        >{call: '예보'}
        <{if: 'true'}> {up: 1}
    >if(context.dialog.forecastdatecheck == 'over') 죄송합니다. 현재 최대 10일간의 날씨정보를 제공하고 있습니다.
    >if(context.dialog.forecastdatecheck == 'below') 죄송합니다. 이전 기간의 날씨정보는 제공하지 않습니다.
    >if(context.dialog.range == '이번주' || context.dialog.range == '다음주' || context.dialog.range == '이번달') +range+의 날씨는 다음과 같습니다.\n#item#+month+/+day+\n날씨: +conditions+\n최저온도: +low+도\n최고온도: +high+도\n#
    >if(context.dialog.item) +item.date.month+/+item.date.day+의 날씨입니다.\n날씨: +item.conditions+\n최저온도: +item.low+도\n최고온도: +item.high+도

현재날씨:
<{types: [{name: 'address', typeCheck: address.addressTypeCheck2, raw: true}], regexp: /날씨/}
{action: publictask.currentweather}
> if((context.dialog.address.시군구명||context.dialog.address.시도명) && context.dialog.address.법정읍면동명 == undefined && context.dialog.address.도로명 == undefined && context.dialog.address.건물본번 == undefined) 고객님, 정확한 안내를 드리기 위하여 +address.시도명+ +address.시군구명+의 하위 상세주소를 입력 부탁드립니다.
    < {types: [{name: 'address', typeCheck: address.addressTypeCheck2, raw: true}]}
    {action: publictask.currentweather}
    > if((context.dialog.address.시군구명||context.dialog.address.시도명) && context.dialog.address.법정읍면동명 == undefined && context.dialog.address.도로명 == undefined && context.dialog.address.건물본번 == undefined) {repeat: 1, options: {output: '고객님, 정확한 안내를 드리기 위하여 +address.시도명+ +address.시군구명+의 하위 상세주소를 입력 부탁드립니다.'}}
    > if(Array.isArray(context.dialog.address)) 다음 중 어떤 지역이신가요?\n#address#+index+. +지번주소+ +시군구용건물명+\n#|다음 중 어떤 지역이신가요?
        <{types: [{name: 'address', listName: 'address', typeCheck: 'listTypeCheck'}]}
        >{call: '현재날씨'}
        <{if: 'true'}> {up: 1}
    > if(context.dialog.weather) 현재 날씨는 +weather+입니다.\n기온은 +temp+도 입니다.
    <{if: 'true'}> {repeat: 1, options : {output: '죄송합니다. 지금 입력하신 주소는 찾을수 없는 주소입니다.\n 아래 예시와 같이 다시 말씀해주세요.\n[예시]\n구로동\n구로구 구로동\n구로구 구로동 423-12'}}
> if(Array.isArray(context.dialog.address)) 다음 중 어떤 지역이신가요?\n#address#+index+. +지번주소+ +시군구용건물명+\n#|다음 중 어떤 지역이신가요?
    <{types: [{name: 'address', listName: 'address', typeCheck: 'listTypeCheck'}]}
    >{call: '현재날씨'}
    <{if: 'true'}> {up: 1}
> if(context.dialog.weather) 현재 날씨는 +weather+입니다.\n기온은 +temp+도 입니다.

현재날씨둘:
<날씨
>어느 지역의 날씨를 알려드릴까요?\n[예시]\n구로동\n구로구 구로동\n구로구 구로동 423-12
    <{types: [{name: 'address', typeCheck: address.addressTypeCheck2, raw: true}]}
    {action: publictask.currentweather}
    > if((context.dialog.address.시군구명||context.dialog.address.시도명) && context.dialog.address.법정읍면동명 == undefined && context.dialog.address.도로명 == undefined && context.dialog.address.건물본번 == undefined) 고객님, 정확한 안내를 드리기 위하여 +address.시도명+ +address.시군구명+의 하위 상세주소를 입력 부탁드립니다.
        < {types: [{name: 'address', typeCheck: address.addressTypeCheck2, raw: true}]}
        {action: publictask.currentweather}
        > if((context.dialog.address.시군구명||context.dialog.address.시도명) && context.dialog.address.법정읍면동명 == undefined && context.dialog.address.도로명 == undefined && context.dialog.address.건물본번 == undefined) {repeat: 1, options: {output: '고객님, 정확한 안내를 드리기 위하여 +address.시도명+ +address.시군구명+의 하위 상세주소를 입력 부탁드립니다.'}}
        > if(Array.isArray(context.dialog.address)) 다음 중 어떤 지역이신가요?\n#address#+index+. +지번주소+ +시군구용건물명+\n#|다음 중 어떤 지역이신가요?
            <{types: [{name: 'address', listName: 'address', typeCheck: 'listTypeCheck'}]}
            >{call: '현재날씨'}
            <{if: 'true'}> {up: 1}
        > if(context.dialog.weather) 현재 날씨는 +weather+입니다.\n기온은 +temp+도 입니다.
        <{if: 'true'}> {repeat: 1, options : {output: '죄송합니다. 지금 입력하신 주소는 찾을수 없는 주소입니다.\n 아래 예시와 같이 다시 말씀해주세요.\n[예시]\n구로동\n구로구 구로동\n구로구 구로동 423-12'}}
    > if(Array.isArray(context.dialog.address)) 다음 중 어떤 지역이신가요?\n#address#+index+. +지번주소+ +시군구용건물명+\n#|다음 중 어떤 지역이신가요?
        <{types: [{name: 'address', listName: 'address', typeCheck: 'listTypeCheck'}]}
        >{call: '현재날씨'}
        <{if: 'true'}> {up: 1}
    > if(context.dialog.weather) 현재 날씨는 +weather+입니다.\n기온은 +temp+도 입니다.

<{types: [{name: 'exchange', typeCheck: publictask.exchangeTypecheck, raw: true}], regexp: /환율/}
{action: publictask.exchangerate}
>if(context.dialog.item.length != 0)+date+\n+currency+ to KRW\n환율은 +rate+원입니다.

시작:
c< {regexp: first}
> 안녕하세요 날씨봇입니다.\n다음과 같이 말씀해주세요~\n[예시]\n구로동 날씨 알려줘\n내일 구로동 날씨\n3일 후 구로동 날씨\n이번주 구로동 날씨

c<{regexp: up}
>{up:1}

c<{regexp: pre}
>{repeat: 1, options: {page: 'pre'}}

c<{regexp: next}
>{repeat: 1, options: {page: 'next'}}
