var path = require('path');
var type = require(path.resolve('modules/bot/action/common/type'));
var address = require(path.resolve('./modules/bot/action/common/address'));
var navertask = require('./navertask');
var publictask = require('./publictask');
var googletask = require('./googletask');
var core = require('./core');

var pre = /(?:~이전|~앞|^<$)/;
var next = /(?:~다음|~뒤|^>$)/;
var up = /(?:^0$)/
var first = /(?:~시작|~처음|^!$|취소)/

현재날씨:
<{types: [{name: 'address', typeCheck: address.addressTypeCheck2, raw: true}], regexp: /날씨/}
{action: publictask.currentweather}
>+weather+ +temp+ +humidity+ +wind+

예보:
<{types: [{name: 'address', typeCheck: address.addressTypeCheck2, raw: true}], regexp: /예/}
{action: publictask.forecastweather}
>+weather+ +temp+ +humidity+ +wind+

뉴스:
<뉴스
navertask.newscrawl
>이응

메일:
<메일
{action: googletask.gmailapi}
>if(!(context.user.google_accesstoken)) {call:'등록'}
>if(context.user.google_accesstoken) #item#+index+. +sendman+\n+title+\n#
    <{types: [{name: 'mail', listName: 'item', typeCheck: 'listTypeCheck'}]}
    > +mail.sendman+\n\n+mail.title+\n\n+mail.snippet+

등록:
<false
>아래 링크에서 액세스를 수락해주세요.\nhttps:\/\/accounts.google.com\/o\/oauth2\/v2\/auth?scope=https%3A%2F%2Fmail.google.com%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcalendar%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcalendar.readonly%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&state=+userId+&redirect_uri=http%3A%2F%2Flocalhost%3A8443%2Fapi%2Fauth%2Fgmail%2Fcallback&access_type=offline&response_type=code&client_id=567723322080-uopbt6mrcntsqn79hr8j260t5sbsui8n.apps.googleusercontent.com

캘린더:
<일정
{action: googletask.calendarapi}
>if(!(context.user.google_accesstoken)) {call:'등록'}
>if(context.user.google_accesstoken) #item#+index+. +summary+\n#
    <{types: [{name: 'calendar', listName: 'item', typeCheck: 'listTypeCheck'}]}
    {action: googletask.eventapi}
    >#event#+index+. +summary+\n시간: +dateTime+\n#

인기봇:
<인기 봇
{action: core.popularbotlist}
> 인기봇 리스트입니다.\n#popularbot#+index+. +name+\n#

최신봇:
<최신 봇
{action: core.newbotlist}
> 최신봇 리스트입니다.\n#newbot#+index+. +name+\n#

친구봇:
<친구 봇
{action: core.followbotlist}
> 친구봇 리스트입니다.\n#followbot#+index+. +name+\n#

마이봇:
<마이 봇
{action: core.userCheck}
>if(context.user.check == true) {call:'마이봇리스트'}
>if(context.user.check == false) ID[이메일]를 입력해주세요
    <{types: [{name: 'email', typeCheck: core.emailTypeCheck, raw: true}]}
    {action: core.authemail}
    >if(context.dialog.emailusercheck == true) 고객님의 메일로 인증코드를 전송하였습니다.\n인증코드를 입력해주세요.
        < {types: [{name: 'code', typeCheck: core.codeTypeCheck, raw: true}]}
        {action: core.authcode}
        >if(context.dialog.codecheck == true) {call:'마이봇리스트'}
        >if(context.dialog.codecheck == false) {repeat: 1, options: {output: '인증코드가 잘못되었습니다.\n다시입력해주세요.'}}
        <{if: 'true'}> {repeat: 1, options: {output: '인증코드의 형식이 틀렸습니다.\n다시입력해주세요.'}}
    >if(context.dialog.emailusercheck == false) {repeat: 1, options: {output: '가입되지 않은 ID[이메일]입니다.\n아래 링크에서 가입 후 진행해주세요.'}}
    <{if: 'true'}> {repeat: 1, options: {output: 'ID[이메일] 형식이 틀렸습니다.\n다시입력해주세요.'}}

마이봇리스트:
<false
{action: core.mybotlist}
> 마이봇 리스트입니다.\n#mybot#+index+. +name+\n#

시작:
c<{regexp: first}
> 인기봇, 최신봇, 친구봇, 마이봇 중에 어떤 것을 안내해드릴까요?

c<{regexp: up}
>{up:1}

c<{regexp: pre}
>{repeat: 1, options: {page: 'pre'}}

c<{regexp: next}
>{repeat: 1, options: {page: 'next'}}
