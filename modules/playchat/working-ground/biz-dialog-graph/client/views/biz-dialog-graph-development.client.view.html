<style>
    /*@font-face{*/
        /*font-family: "Noto Sans";*/
        /*src: url("NotoSansCJKkr-Medium.otf");*/
    /*}*/
.working-ground
{
    padding: 0 !important;
}

.playchat-background .top-bar+div > div .working-ground
{
    overflow-x: hidden;
}

caption
{
    margin-bottom: 10px;
    font-size: 15px;
    font-weight: 600;
    text-align: left;
    display: table-caption;
}

.close-topBar
{
    border: 2px black solid;
    border-radius : 6px;
    padding : 9px 10px;

}

.topBarToggleButton
{
    display: block;
}

</style>


<!--head area-->
<head>
    <script src="http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js"></script>
</head>

<!--card area-->
<script type="text/template" id="dialogGraphTemplate">
    <div class="graph-dialog" id="{id}">
        <div class="graph-dialog-item">
            <div class="graph-dialog-header">
                <span>{name}</span>
                <a href="" class="dialog-more"></a>
            </div>
            <div class="graph-dialog-input">
                {input}
                <a href="#" class="arrow"><img src="/modules/playchat/working-ground/biz-dialog-graph/client/imgs/miniarrow.png"></a>
            </div>
            {task}
            <div class="graph-dialog-output">
                {output}
            </div>
            {buttons}
            <a class="graph-fold" ng-click="toggleChild($event);"></a>
        </div>
        <div class="graph-dialog-children"></div>
    </div>
</script>

<!-- 선택형 -->
<script type="text/template" id="5b486d4a55611f9addf74b64">
    <div>
        <span class="message-title02">{name}</span>
        <select class="message-inselect ml3">
            <option selected>{messageType}</option>
        </select>
        <span class="open-btn" ng-click="cardUiSet($event)">-</span>
        <p class="cd">내용입력</p>
        <textarea placeholder="내용을 입력해주세요.">{output}</textarea>
        <div class="detail-select">
            <input type="checkbox">
            <label>문항별 메시지 연결</label>
            <div class="connection-data" ng-repeat="input in Data.dialog[$index].input">
                {{$index+1}}
                <input type="text" class="ml3 type01"><img src="/modules/playchat/working-ground/biz-dialog-graph/client/imgs/link.png">
                <select class="message-inselect">
                    <option ng-repeat="ar in Data.cardArr">ar.name</option>
                </select>
            </div>
        </div>
        <a class="deleteBtn reorder" href="">삭제</a>
    </div>
</script>
<!-- 단답형 -->
<script type="text/template" id="5b486e6955611f9addf74b65">
    <div>
        <span class="message-title02">{name}</span>
        <select class="message-inselect ml3">
            <option selected>{messageType}</option>
        </select>
        <span class="open-btn" ng-click="cardUiSet($event)">-</span>
        <p class="cd">내용입력</p>
        <textarea placeholder="내용을 입력해주세요.">{output}</textarea>
        <a class="deleteBtn reorder" ng-click="delete($event)" href="">삭제</a>
    </div>
</script>
<!-- 일반형 -->
<script type="text/template" id="5b486d4a55611f9addf74b66">
    <div>
        <span class="message-title02">{name}</span>
        <select class="message-inselect ml3">
            <option selected>{messageType}</option>
        </select>
        <span class="open-btn" ng-click="cardUiSet($event)">-</span>
        <p class="cd">내용입력</p>
        <textarea placeholder="내용을 입력해주세요.">{output}</textarea>
        <a class="deleteBtn reorder" ng-click="delete($event)" href="">삭제</a>
    </div>
</script>
<!-- 정보형 -->
<script type="text/template" id="5b486e8955611f9addf74b67">
    <div>
        <span class="message-title02">{name}</span>
        <select class="message-inselect ml3">
            <option selected>{messageType}</option>
        </select>
        <span class="open-btn" ng-click="cardUiSet($event)">-</span>
        <p class="cd">내용입력</p>
        <textarea placeholder="내용을 입력해주세요.">{output}</textarea>
        <div class="detail-select">
            <input type="checkbox">
            <label>URL</label><input type="text" class="ml3 type03" value="{url}">
        </div>
        <a class="deleteBtn reorder" href="">삭제</a>
    </div>
</script>
<!-- 연락처수집형 -->
<script type="text/template" id="5b486d4a55611f9addf74b68">
    <div>
        <span class="message-title02">{name}</span>
        <select class="message-inselect ml3">
            <option selected>{messageType}</option>
        </select>
        <span class="open-btn" ng-click="cardUiSet($event)">-</span>
        <p class="cd">내용입력</p>
        <textarea placeholder="내용을 입력해주세요.">{output}</textarea>
        <a class="deleteBtn reorder" ng-click="delete($event)" href="">삭제</a>
    </div>
</script>
<!-- 날짜수집형 -->
<script type="text/template" id="5b486d4a55611f9addf74b69">
    <div>
        <span class="message-title02">{name}</span>
        <select class="message-inselect ml3">
            <option selected>{messageType}</option>
        </select>
        <span class="open-btn" ng-click="cardUiSet($event)">-</span>
        <p class="cd">내용입력</p>
        <textarea placeholder="내용을 입력해주세요.">{output}</textarea>
        <a class="deleteBtn reorder" ng-click="delete($event)" href="">삭제</a>
    </div>
</script>
<!-- 이미지형 -->
<script type="text/template" id="5b486d4a55611f9addf74b6a">
    <div>
        <span class="message-title02">{name}</span>
        <select class="message-inselect ml3">
            <option selected>{messageType}</option>
        </select>
        <span class="open-btn" ng-click="cardUiSet($event)">-</span>
        <a href=""><div class="pic-area"></div></a>
        <span style="color: #038eda;margin-left: 0;">0000 * 0000 권장 합니다.</span>
        <a class="deleteBtn02" href="">삭제</a>
        <p class="cd">내용입력</p>
        <textarea placeholder="내용을 입력해주세요.">{output}</textarea>
        <a class="deleteBtn reorder" ng-click="delete($event)" href="">삭제</a>
    </div>
</script>

<div ng-controller="BizDialogGraphDevelopmentController" class="graph-background">

    <!--header tab line-->
    <!--search/zoom/edit target select line -->
    <div class="working-ground-bizchat">
        <select ng-model="selectedBot" ng-change="bizbotSelectChange(selectedBot)" ng-init="selectedBot = bots[0]" class="custom-select"  ng-options="x.name for x in bots"></select>
        <a href="" class="icon-area" style="margin-left: 2%;"><img src="/modules/playchat/working-ground/biz-dialog-graph/client/imgs/copy.png"></a>
        <a href="" class="icon-area"><img src="/modules/playchat/working-ground/biz-dialog-graph/client/imgs/save.png"></a>

        <div class="subtitle">
            <div class="message-edit-list">
                <span>메세지 서식 리스트</span>
                <ul>
                    <li class="select"><a href="#">이벤트 안내 메세지</a></li>
                    <li><a href="">전화번호 수집</a></li>
                    <li><a href="">주소 수집</a></li>
                    <li><a href="">개인정보 동의</a></li>
                    <li><a href="">아웃링크 이벤트 정보</a></li>
                    <li><a href="">이미지 첨부 이벤트</a></li>
                </ul>
            </div>
            <div class="bot-messages-list">
                <span>{{chatbot.name}} (총 {{Data.cardArr.length}} 개의 메세지)</span>
                <ul>
                    <li ng-repeat="card in Data.cardArr" ng-class="card.is_open? 'select' : ''">
                        <div ng-if="!card.is_open">
                            <span class="message-title01">{{$index+1}} {{card.name}}</span>
                            <select class="message-inselect ml3">
                                <option>{{getCardType(card.type).name}}</option>
                            </select>
                            <span ng-click="cardUiSet(card)" class="close-btn">+</span>
                        </div>
                        <!-- 선택형 -->
                        <div ng-if="card.is_open && getCardType(card.type)._id == '5b486d4a55611f9addf74b64'">
                            <span class="message-title02">{{$index+1}} {{card.name}}</span>
                            <select class="message-inselect ml3">
                                <option selected>{{getCardType(card.type).name}}</option>
                            </select>
                            <span class="open-btn" ng-click="cardUiSet(card)">-</span>
                            <p class="cd">내용입력</p>
                            <textarea placeholder="내용을 입력해주세요.">{{card.output[0].text}}</textarea>
                            <div class="detail-select">
                                <input type="checkbox">
                                <label>문항별 메시지 연결</label>
                                <div class="connection-data" ng-repeat="input in getNextInputList(card.id)">
                                    {{$index+1}}
                                    <input type="text" class="ml3 type01" value="{{input.input[0].text.raw || input.input[0].types[0]}}"><img src="/modules/playchat/working-ground/biz-dialog-graph/client/imgs/link.png">
                                    <select ng-change="test()" ng-model="input.id" class="message-inselect">
                                        <option ng-repeat="ar in Data.cardArr" value="{{ar.id}}">{{ar.name}}</option>
                                    </select>
                                </div>
                            </div>
                            <a class="deleteBtn reorder" href="">삭제</a>
                        </div>
                        <!-- 단답형, 일반형, 연락처수집형, 날짜수집형 -->
                        <div ng-if="card.is_open && (getCardType(card.type)._id == '5b486e6955611f9addf74b65' ||
                         getCardType(card.type)._id == '5b486d4a55611f9addf74b66' ||
                         getCardType(card.type)._id == '5b486d4a55611f9addf74b68' ||
                         getCardType(card.type)._id == '5b486d4a55611f9addf74b69')">
                            <span class="message-title02">{{$index+1}} {{card.name}}</span>
                            <select class="message-inselect ml3">
                                <option selected>{{getCardType(card.type).name}}</option>
                            </select>
                            <span class="open-btn" ng-click="cardUiSet(card)">-</span>
                            <p class="cd">내용입력</p>
                            <textarea placeholder="내용을 입력해주세요.">{{card.message}}</textarea>
                            <a class="deleteBtn reorder" href="" ng-click="delete(card)">삭제</a>
                        </div>
                        <!-- 정보형 -->
                        <div ng-if="card.is_open && getCardType(card.type)._id == '5b486e8955611f9addf74b67'">
                            <span class="message-title02">{{$index+1}} {{card.name}}</span>
                            <select class="message-inselect ml3">
                                <option selected>{{getCardType(card.type).name}}</option>
                            </select>
                            <span class="open-btn" ng-click="cardUiSet(card)">-</span>
                            <p class="cd">내용입력</p>
                            <textarea placeholder="내용을 입력해주세요.">{{card.output[0].text}}</textarea>
                            <div class="detail-select">
                                <input type="checkbox">
                                <label>URL</label><input type="text" class="ml3 type03" value="{{card.output[0].url}}">
                            </div>
                            <a class="deleteBtn reorder" href="" ng-click="delete(card)">삭제</a>
                        </div>
                        <!-- 이미지형 -->
                        <div ng-if="card.is_open && getCardType(card.type)._id == '5b486d4a55611f9addf74b6a'">
                            <span class="message-title02">{{$index+1}} {{card.name}}  {{card.is_open}}</span>
                            <select class="message-inselect ml3">
                                <option selected>{{getCardType(card.type).name}}</option>
                            </select>
                            <span class="open-btn" ng-click="cardUiSet(card)">-</span>
                            <a href=""><div class="pic-area"
                                style="background-image : {{card.output[0].image ? url(card.output[0].image.url) : url('/modules/playchat/working-ground/biz-dialog-graph/client/imgs/pic-bg.png')}}"></div></a>
                            <span style="color: #038eda;margin-left: 0;">0000 * 0000 권장 합니다.</span>
                            <a class="deleteBtn02" href="">삭제</a>
                            <p class="cd">내용입력</p>
                            <textarea placeholder="내용을 입력해주세요.">{{card.output[0].text}}</textarea>
                            <a class="deleteBtn reorder" ng-click="delete($event)" href="">삭제</a>
                        </div>
                    </li>

                    <li class="select">
                        <div ng-if="addCardSentence._id == '5b486d4a55611f9addf74b64'">
                            <span class="message-title02">{{Data.cardArr.length+1}} {{card.name}}</span>
                            <select class="message-inselect ml3">
                                <option selected>{{addCardSentence.name}}</option>
                            </select>
                            <span class="open-btn" ng-click="cardUiSet(addCardSentence)">-</span>
                            <p class="cd">내용입력</p>
                            <textarea placeholder="내용을 입력해주세요.">{{addCardSentence.message}}</textarea>
                            <div class="detail-select">
                                <input type="checkbox">
                                <label>문항별 메시지 연결</label>
                                <div class="connection-data" ng-repeat="input in card.addCardSentence">
                                    {{$index+1}}
                                    <input type="text" class="ml3 type01" value="{{input.types? 'Type : ' + input.types : input.text }}"><img src="/modules/playchat/working-ground/biz-dialog-graph/client/imgs/link.png">
                                    <select ng-change="test()" ng-model="input.children[$index].id" class="message-inselect">
                                        <option ng-repeat="ar in getChildCards(Data.cardArr)" value="{{ar.id}}">{{ar.name}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <!-- 단답형, 일반형, 연락처수집형, 날짜수집형 -->
                        <div ng-if="(addCardSentence._id == '5b486e6955611f9addf74b65' || addCardSentence._id == '5b486d4a55611f9addf74b66' || addCardSentence._id == '5b486d4a55611f9addf74b68' || addCardSentence._id == '5b486d4a55611f9addf74b69')">
                            <span class="message-title02">{{Data.cardArr.length+1}} {{addCardSentence.name}}</span>
                            <select class="message-inselect ml3">
                                <option selected>{{addCardSentence.name}}</option>
                            </select>
                            <span class="open-btn" ng-click="cardUiSet(addCardSentence)">-</span>
                            <p class="cd">내용입력</p>
                            <textarea placeholder="내용을 입력해주세요.">{{addCardSentence.message}}</textarea>
                        </div>
                        <!-- 정보형 -->
                        <div ng-if="addCardSentence._id == '5b486e8955611f9addf74b67'">
                            <span class="message-title02">{{Data.cardArr.length+1}} {{addCardSentence.name}}</span>
                            <select class="message-inselect ml3">
                                <option selected>{{addCardSentence.name}}</option>
                            </select>
                            <span class="open-btn" ng-click="cardUiSet(addCardSentence)">-</span>
                            <p class="cd">내용입력</p>
                            <textarea placeholder="내용을 입력해주세요.">{{addCardSentence.message}}</textarea>
                            <div class="detail-select">
                                <input type="checkbox">
                                <label>URL</label><input type="text" class="ml3 type03" value="{{addCardSentence.output.url}}">
                            </div>
                        </div>
                        <!-- 이미지형 -->
                        <div ng-if="addCardSentence._id == '5b486d4a55611f9addf74b6a'">
                            <span class="message-title02">{{Data.cardArr.length+1}} {{addCardSentence.name}}</span>
                            <select class="message-inselect ml3">
                                <option selected>{{addCardSentence.name}}</option>
                            </select>
                            <span class="open-btn" ng-click="cardUiSet(addCardSentence)">-</span>
                            <a href=""><div class="pic-area"
                                            style="background-image : {{addCardSentence.output.image.url != '' ? url(addCardSentence.output.image.url) : url('/modules/playchat/working-ground/biz-dialog-graph/client/imgs/pic-bg.png')}}"></div></a>
                            <span style="color: #038eda;margin-left: 0;">0000 * 0000 권장 합니다.</span>
                            <a class="deleteBtn02" href="">삭제</a>
                            <p class="cd">내용입력</p>
                            <textarea placeholder="내용을 입력해주세요.">{{addCardSentence.message}}</textarea>
                        </div>
                    </li>
                    <li>
                        <span class="message-title01">01. 메시지</span>
                        <select class="message-inselect ml3" disabled>
                            <option>텍스트 - 선택형</option>
                            <option>텍스트 - 선택형</option>
                        </select>
                        <a href=""><span class="open-btn"><img src="/modules/playchat/working-ground/biz-dialog-graph/client/imgs/plus_.png"></span></a>
                    </li></a>
                    <li>
                        <a href=""><span class="message-title01">02. 메시지</span>
                            <select class="message-inselect ml3">
                                <option selected>텍스트 - 단답형/일반</option>
                                <option>텍스트 - 선택형</option>
                            </select>
                            <a href=""><span class="close-btn"><img src="/modules/playchat/working-ground/biz-dialog-graph/client/imgs/minus_.png"></span></a>
                            <p class="cd">내용입력</p>
                            <textarea placeholder="내용을 입력해주세요."></textarea>
                            <a class="deleteBtn" href="">삭제</a>
                            <a class="addBtn" href="">저장</a>
                        </a>
                    </li>
                    <li class="select">
                        <a href=""><span class="message-title02">04. 메시지</span>
                            <select class="message-inselect ml3">
                                <option selected>텍스트 - 선택형</option>
                                <option>텍스트 - 선택형</option>
                            </select>
                            <p class="cd">내용입력</p>
                            <textarea placeholder="내용을 입력해주세요."></textarea>
                            <div class="detail-select">
                                <input type="checkbox" name="connection02" value="" id="connection02">
                                <label for="connection02">문항별 메시지 연결</label>
                                <div class="connection-data">
                                    1.<input type="text" class="ml3 type02">
                                </div>
                                <div class="connection-data">
                                    2.<input type="text" class="ml3 type02">
                                </div>
                                <div class="connection-data">
                                    3.<input type="text" class="ml3 type02">
                                </div>
                                <div class="reorder">
                                    <a href="" class=""><img src="/modules/playchat/working-ground/biz-dialog-graph/client/imgs/plus.png"></a>
                                    <a href="" class=""><img src="/modules/playchat/working-ground/biz-dialog-graph/client/imgs/minus.png"></a>
                                </div>
                            </div>
                            <a class="deleteBtn reorder" href="">삭제</a>
                            <a class="addBtn" href="">추가</a>
                        </a>
                    </li>
                    <li class="new-select">
                        <select ng-model="addCardSentence" ng-change="addCard(addCardSentence)" class="add-menu" ng-options="x.name for x in Data.defaultSentences"></select>
                    </li>
                </ul>
            </div>
            <div class="message-view">
                <div class="mobile-view-practice">
                    <div class="header">
                        <p>{{selectedBot.name}}</p>
                        <a href="" class="lef"><img src="/modules/playchat/working-ground/biz-dialog-graph/client/imgs/reset02.png"></a>
                    </div>
                </div>
                <div class="dialog-input">
                    <input placeholder="input your info">
                    <button type="button">
                        <img src="/modules/playchat/working-ground/biz-dialog-graph/client/imgs/send.png">
                    </button>
                </div>

                <div class="dialog-setting">
                    <p>대화셋 설정-<br>아래 대화셋을 설정하고, 고객의 문의에 대응하세요.</p>
                    <button class="select"># 기본</button>
                    <button class="select"># 6월 이벤트</button>
                    <button>#1월 이벤트</button>
                    <button># 신규 TES</button>
                    <button># 설문_01</button>
                </div>
                <a href=""><div class="dialog-btn">발송하기</div></a>
            </div>
        </div>
    </div>
<!--
    <div class="graph-body" ng-class="isFocused() ? 'focused' : ''" ng-click="toFocus();">

        <!--init here the selected card
        <div id="graphDialogCanvas"></div>
    </div>
-->
</div>

