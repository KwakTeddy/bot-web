<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><%= title %></title>
    <link rel='stylesheet' href='' />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>




</head>
<body>
    <div class="main">
        <a href="/boards"><h2>FAQ 게시판</h2></a>
        <div class="content_box">
            <!-- content box-->
            <div class="content_detail">
                <div class="content-title"><%=content.title%></div>
                <div class="content-info">
                    <%=dateFormatChange(content.date)%> / <%=content.writer%>
                </div>
                <div class="content-text">
                    <%=content.contents%>
                </div>
                <div class="download-file">
                </div>
                <div class="addBtngroup" style="margin-left:450px;">
                    <a onclick="modifyContents();">수정</a>
                    <a onclick="deleteContents();">삭제</a>
                    <a href="/boards">확인</a>
                </div>
            </div>
            <!-- content box end -->

            <!-- 혁신의 끝을 달리는 옆에서 달아주는 댓글 창-->
            <div class="reply">
                <div class="reply_list">
                    <%if(content.comments.length>0){%>
                    <%var commentsList = content.comments;%>
                    <%for(var i=0; i<commentsList.length; i++){%>
                    <%if(i<5){%>
                    <div class="reply_content">
                        <div class="reply_info"><%=commentsList[i].name%> / <%=dateFormatChange(commentsList[i].date)%></div>
                        <div class="reply_text"><%=commentsList[i].memo%></div>
                    </div>
                    <%}%>
                    <%}%>
                    <%} else {%>
                    <div class="reply_content">
                        <div class="reply_info">댓글이 없습니다</div>
                    </div>
                    <%}%>
                </div>

                <!-- 댓글 페이징 -->
                <div class="reply_pagination">
                    <ul>
                        <%
                        for(var i=1; i<=replyPage; i++){
                        %>
                        <a href="#" onclick="changePage(<%=i%>);"><li><%=i%></li></a>
                        <%}%>
                    </ul>
                </div>
                <!-- 댓글 페이징 끝-->
                <div class="reply_form">
                    <form id="replyAction" action="/boards/reply" method="post">
                        <div class="reply_writer">
                            <input type="text" class="replyWriter" id="replyWriter" name="replyWriter" placeholder="댓글작성자">
                        </div>
                        <div class="reply_comment">
                            <textarea class="replyComment" id="replyComment" name="replyComment" rows="3" cols="30"></textarea>
                        </div>
                        <input type="hidden" name="replyId" id="replyId" value="<%=content._id%>">
                        <button type="submit">댓글 작성</button>
                    </form>
                </div>
            </div>
            <!-- end -->

            <!-- modify content form-->
            <div class="modify_form">
                <form id="modifyAction" action="/boards/?mode=modify" method="post"> <!-- 경로 설정 /: 이거 뭔가 해야징-->
                    <input type="text" class="modSubject" id="modContentSubject" name="modContentSubject" placeholder="제목">
                    <input type="password" class="inputPassword" id="modContentPassword" name="modContentPassword" placeholder="비밀번호">
                    <span class="modWriter" id="modContentWriter" name="modContentWriter"></span>
                    <textarea class="textContents" id="modContents" name="modContents" rows="20" cols="80"></textarea>
                    <input type="hidden" id="modId" name="modId" value="<%=content._id%>">
                </form>
                <div class="addBtngroup" style="margin-left:520px;">
                    <a onclick="modifySubmitContents();">SUBMIT</a>
                    <a onclick="cancelForm('modify');">CANCEL</a>
                </div>
            </div>
            <!-- modify form end-->
        </div>
        <!-- delete confirm window -->
        <div class="delete_confirm">
            <h1>비밀 번호를 입력하면 글이 삭제됩니다</h1>
            <input type="password" id="delPassword" name="delPassword">
            <button onclick="deleteConfirm();">Delete</button>
            <button onclick="cancelForm('delete');">Cancel</button>
        </div>
        <!-- end -->
    </div>
</body>
</html>


<%
function dateFormatChange(date) {

    var options = {
        weekday: "short", year: "numeric", month: "short",
        day: "numeric", hour: "2-digit", minute: "2-digit"
    };
    return date.toLocaleTimeString("ko-KR", options);

}
%>
