<script>
  function changeFunc(selectBox) {
    document.getElementById("year").style.display = "none";
    document.getElementById("ym").style.display = "none";
    switch (selectBox.selectedIndex) {
      case 1:
        document.getElementById("year").style.display = "inline";
        break;
      case 2:
        document.getElementById("ym").style.display = "inline";
        break;
    }
  }
  $.extend( true, $.fn.dataTable.defaults, {
    "order": [],
    "columnDefs": [
      {"orderable": false, "targets": 0 }
    ]
  } );

  $(document).ready(function() {
    $('#dt').DataTable();
  } );

</script>

<header class="page-header">
  <h2>대화별 사용량 분석</h2>

  <div class="right-wrapper pull-right">
    <a class="sidebar-right-toggle" data-open="sidebar-right"><i class="fa fa-chevron-left"></i></a>
  </div>
</header>

<!-- start: page -->
<section class="panel" ng-controller="AnalyticsListController" ng-init="find_dialog()">
  <header class="panel-heading">
    <form name="form" novalidate="novalidate">
      <table width="100%"><tr><td>
        <h2 class="panel-title">&nbsp;</h2>
      </td><td align="right">
        <select name="kind" ng-model="kind"  onchange="changeFunc(this)">
          <option selected="selected" value="all">전체</option>
          <option value="year">연도별</option>
          <option value="month">월별</option>
        </select>
        <input type="number" id="year" ng-model="year" min="1999" max="2100" value='2017' style="display:none">
        <input type="month" id="ym" ng-model="ym" style="display:none" value="2017-03">
        <button class="btn btn-primary" ng-click="find_dialog()">검색</button>
      </td></tr></table>
    </form>
  </header>

  <div class="panel-body">
    <table datatable="ng" id="dt" class="table table-bordered table-striped mb-none">
      <thead>
      <tr>
        <th class="text-center">대화</th>
        <th class="text-center">사용량</th>
      </tr>
      </thead>
      <tbody>
      <tr ng-repeat="dialogUsage in dialogUsages">
        <td class="text-center">{{dialogUsage._id}}</td>
        <td class="text-center">{{dialogUsage.count}}</td>
      </tr>
      </tbody>
    </table>
  </div>
</section>
